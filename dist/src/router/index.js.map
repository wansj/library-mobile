{"version":3,"sources":["../../../src/router/index.js"],"names":["Vue","Router","isLoged","apolloClient","UpdateLoadingStatusMutation","use","router","mode","routes","path","component","then","m","default","meta","requireAuth","children","props","route","id","params","bookId","query","userId","skip","limit","field","value","category","friendId","friend","sessionId","source","beforeEach","to","from","next","mutate","mutation","variables","loading","matched","some","record","loged","afterEach"],"mappings":"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","file":"index.js","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\nimport { isLoged } from '../utils'\nimport apolloClient from '../ApolloClient'\nimport { UpdateLoadingStatusMutation } from '../store/LoadingStatus'\n\nVue.use(Router)\n\nconst router = new Router({\n  mode: 'history',\n  routes: [\n    {\n      path: '/signin',\n      component: () => import('@/components/SignIn.vue').then(m => m.default)\n    },\n    {\n      path: '/reset-password',\n      component: () => import('@/components/Resetpassword.vue').then(m => m.default)\n    },\n    {\n      path: '/signup',\n      component: () => import('@/components/SignUp.vue').then(m => m.default)\n    },\n    {\n      path: '/',\n      component: () => import('@/components/MainLayout.vue').then(m => m.default),\n      meta: { requireAuth: true },\n      children: [{\n        path: '',\n        component: () => import('@/components/Home.vue').then(m => m.default)\n      }, {\n        path: 'categories',\n        component: () => import('@/components/CategoryLayout.vue').then(m => m.default)\n      }, {\n        path: 'me',\n        component: () => import('@/components/Me.vue').then(m => m.default)\n      }]\n    },\n    {\n      path: '/books',\n      meta: { requireAuth: true },\n      component: () => import('@/components/BookLayout.vue').then(m => m.default),\n      children: [{\n        path: ':id',\n        component: () => import('@/components/BookDetails.vue').then(m => m.default),\n        props: (route) => ({id: route.params.id})\n      }, {\n        path: 'comments/view',\n        component: () => import('@/components/CommentsView.vue').then(m => m.default),\n        props: (route) => ({bookId: route.query.bookId, userId: route.query.userId})\n      }, {\n        path: 'comments/:id',\n        component: () => import('@/components/CommentsDetail.vue').then(m => m.default),\n        props: (route) => ({id: route.params.id, skip: route.query.skip, limit: route.query.limit, bookId: route.query.bookId})\n      }, {\n        path: 'cart/view',\n        component: () => import('@/components/BookCart.vue').then(m => m.default)\n      }]\n    },\n    {\n      path: '/books/:id/comments/post',\n      meta: { requireAuth: true },\n      component: () => import('@/components/PostComment.vue').then(m => m.default),\n      props: (route) => ({bookId: route.params.id, userId: route.query.userId})\n    },\n    {\n      path: '/user',\n      meta: { requireAuth: true },\n      component: () => import('@/components/UserDetails.vue').then(m => m.default)\n    },\n    {\n      path: '/editUser',\n      meta: { requireAuth: true },\n      component: () => import('@/components/EditUser.vue').then(m => m.default),\n      props: (route) => ({field: route.query.field, value: route.query.value, id: route.query.id})\n    },\n    {\n      path: '/history',\n      meta: { requireAuth: true },\n      component: () => import('@/components/BorrowHistory.vue').then(m => m.default)\n    },\n    {\n      path: '/collection',\n      meta: { requireAuth: true },\n      component: () => import('@/components/UserCollection.vue').then(m => m.default)\n    },\n    {\n      path: '/search',\n      meta: { requireAuth: true },\n      component: () => import('@/components/SearchPage.vue').then(m => m.default),\n      props: (route) => ({category: route.query.category})\n    },\n    {\n      path: '/borrow-plan',\n      meta: { requireAuth: true },\n      component: () => import('@/components/BorrowPlan.vue').then(m => m.default)\n    },\n    {\n      path: '/return-plan',\n      meta: { requireAuth: true },\n      component: () => import('@/components/ReturnPlan.vue').then(m => m.default)\n    },\n    {\n      path: '/my-plan',\n      meta: { requireAuth: true },\n      component: () => import('@/components/MyPlan.vue').then(m => m.default)\n    },\n    {\n      path: '/my-interests',\n      meta: { requireAuth: true },\n      component: () => import('@/components/MyInterests.vue').then(m => m.default)\n    },\n    {\n      path: '/friends',\n      meta: { requireAuth: true },\n      component: () => import('@/components/Friends.vue').then(m => m.default)\n    },\n    {\n      path: '/addFriend',\n      meta: { requireAuth: true },\n      component: () => import('@/components/AddFriend.vue').then(m => m.default)\n    },\n    {\n      path: '/validateFriend',\n      meta: { requireAuth: true },\n      component: () => import('@/components/ValidateFriend.vue').then(m => m.default),\n      props: (route) => ({friendId: route.query.friendId})\n    },\n    {\n      path: '/talk/:friend',\n      meta: { requireAuth: true },\n      component: () => import('@/components/Talk.vue').then(m => m.default),\n      props: (route) => ({friendId: route.params.friend, sessionId: route.query.sessionId})\n    },\n    {\n      path: '/share/:friend',\n      meta: { requireAuth: true },\n      component: () => import('@/components/ShareBook.vue').then(m => m.default),\n      props: (route) => ({friendId: route.params.friend, sessionId: route.query.sessionId, source: route.query.source})\n    },\n    {\n      path: '/notifications',\n      meta: { requireAuth: true },\n      component: () => import('@/components/Notifications.vue').then(m => m.default)\n    },\n    {\n      path: '/settings',\n      meta: { requireAuth: true },\n      component: () => import('@/components/Settings.vue').then(m => m.default)\n    },\n    {\n      path: '/privacy',\n      component: () => import('@/components/Privacy.vue').then(m => m.default)\n    },\n    {\n      path: '/aboutMe',\n      component: () => import('@/components/AboutMe.vue').then(m => m.default)\n    },\n    {\n      path: '/feedback',\n      meta: { requireAuth: true },\n      component: () => import('@/components/Feedback.vue').then(m => m.default)\n    }\n  ]\n})\nrouter.beforeEach(async (to, from, next) => {\n  apolloClient.mutate({\n    mutation: UpdateLoadingStatusMutation,\n    variables: { loading: true }\n  })\n  if (to.matched.some(record => record.meta.requireAuth)) {\n    const loged = await isLoged()\n    // console.log(token)\n    if (!loged) {\n      next({\n        path: '/signin'\n      })\n    } else {\n      next()\n    }\n  } else {\n    next()\n  }\n})\nrouter.afterEach(function (to) {\n  apolloClient.mutate({\n    mutation: UpdateLoadingStatusMutation,\n    variables: { loading: false }\n  })\n})\nexport default router\n"]}